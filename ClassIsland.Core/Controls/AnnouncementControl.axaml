<UserControl x:Class="ClassIsland.Core.Controls.AnnouncementControl"
             xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:ClassIsland.Core.Controls"
             xmlns:commands="clr-namespace:ClassIsland.Core.Commands"
             xmlns:controls="clr-namespace:FluentAvalonia.UI.Controls;assembly=FluentAvalonia"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <Grid DataContext="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=local:AnnouncementControl}}"
          x:Name="Root"
          Classes.HasDetails="{Binding Announcement.HasDetails}">
        <Grid.Styles>
            <Style Selector="Grid#Root.HasDetails controls|InfoBar#MainInfoBar">
                <Setter Property="ActionButton">
                    <Template>
                        <Button Content="详细信息"
                                Click="ButtonDetails_OnClick"/>
                    </Template>
                </Setter>
            </Style>
        </Grid.Styles>
        <Interaction.Behaviors>
            <DataTriggerBehavior Binding="{Binding Announcement.Severity}" Value="Announcement">
                <AddClassAction ClassName="Announcement"/>
            </DataTriggerBehavior>
            <DataTriggerBehavior Binding="{Binding Announcement.Severity}" Value="Info">
                <AddClassAction ClassName="Info"/>
            </DataTriggerBehavior>
            <DataTriggerBehavior Binding="{Binding Announcement.Severity}" Value="Important">
                <AddClassAction ClassName="Important"/>
            </DataTriggerBehavior>
            <DataTriggerBehavior Binding="{Binding Announcement.Severity}" Value="Warning">
                <AddClassAction ClassName="Warning"/>
            </DataTriggerBehavior>
            <DataTriggerBehavior Binding="{Binding Announcement.Severity}" Value="Critical">
                <AddClassAction ClassName="Critical"/>
            </DataTriggerBehavior>
        </Interaction.Behaviors>
        <controls:InfoBar x:Name="MainInfoBar"
                          Severity="{Binding Announcement.Severity, Converter={x:Static local:AnnouncementControl.AnnouncementSeverityToInfoBarSeverityConverter}}"
                          Message="{Binding Announcement.Summary}"
                          IsOpen="True"
                          CloseButtonClick="ButtonRead_OnClick"/>
    </Grid>
</UserControl>

